<!-- /index.html -->
<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ravi Satyappa Dabbanavar ‚Äî Scholar Website</title>
  <meta name="description" content="Personal academic website of Ravi Satyappa Dabbanavar, Ph.D. Scholar at IIT Roorkee: research, publications, projects, teaching, and contact." />
  <meta name="robots" content="index,follow" />
  <!-- why: set your actual username/URL for best SEO/social previews -->
  <link rel="canonical" href="https://<your-username>.github.io/" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b0c0f">

  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üéì</text></svg>">

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Ravi Satyappa Dabbanavar ‚Äî Scholar Website" />
  <meta property="og:site_name" content="Ravi Satyappa Dabbanavar" />
  <meta property="og:description" content="Research ‚Ä¢ Publications ‚Ä¢ Projects ‚Ä¢ Teaching" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://<your-username>.github.io/" />
  <!-- why: use your hosted headshot for rich cards -->
  <meta property="og:image" content="https://<your-username>.github.io/assets/profile.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://<your-username>.github.io/assets/profile.jpg" />

  <style>
    :root {
      --bg: #0b0c0f;
      --text: #e6e6e6;
      --muted: #b3b3b3;
      --card: #12141a;
      --accent: #4da3ff;
      --accent-contrast: #001a33;
      --border: #2a2f3a;
      --link: #7db6ff;
      --focus: #7db6ff;
      --shadow: 0 8px 20px rgba(0,0,0,.2);
    }
    html[data-theme="light"] {
      --bg: #ffffff;
      --text: #111318;
      --muted: #4b5563;
      --card: #f5f7fb;
      --accent: #2563eb;
      --accent-contrast: #e8f0ff;
      --border: #e5e7eb;
      --link: #1d4ed8;
      --focus: #1d4ed8;
      --shadow: 0 8px 20px rgba(17,19,24,.08);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 400 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    :focus-visible {
      outline: 2px dashed var(--focus);
      outline-offset: 3px;
      border-radius: 6px;
    }

    .container { width: min(1100px, 92%); margin-inline: auto; }
    .stack { display: grid; gap: 1rem; }

    .skip-link { position: absolute; left: -1000px; top: -1000px; }
    .skip-link:focus-visible {
      left: 1rem; top: 1rem; background: var(--accent); color: #fff;
      padding: .5rem .75rem; border-radius: .5rem;
    }

    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: saturate(180%) blur(8px);
      background: color-mix(in oklab, var(--bg) 85%, transparent);
      border-bottom: 1px solid var(--border);
    }
    .progress {
      position: fixed; top: 0; left: 0; height: 3px; width: 0%;
      background: linear-gradient(90deg, var(--accent), color-mix(in oklab, var(--accent) 70%, #fff));
      z-index: 100;
      transform-origin: left center;
    }

    .nav { display: flex; align-items: center; justify-content: space-between; padding: .75rem 0; }
    .brand { display: flex; align-items: center; gap: .6rem; font-weight: 700; }
    .brand img { width: 28px; height: 28px; border-radius: 50%; }
    .nav a { font-weight: 600; }
    .nav-links { display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; }
    .nav-links a { padding: .4rem .6rem; border-radius: .5rem; }
    .nav-links a:hover { background: var(--card); text-decoration: none; }
    .nav-links a[aria-current="true"] { outline: 2px solid var(--border); }
    .theme-btn {
      border: 1px solid var(--border); background: var(--card); color: var(--text);
      padding: .4rem .6rem; border-radius: .5rem; cursor: pointer; font-weight: 600;
    }

    .hero { padding: 3rem 0 2rem; }
    .hero-inner { display: grid; grid-template-columns: 140px 1fr; gap: 1.2rem; align-items: center; }
    .avatar {
      width: 140px; height: 140px; border-radius: 1rem; object-fit: cover; border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }
    h1 { font-size: clamp(1.8rem, 1.2rem + 2.6vw, 3rem); margin: 0; line-height: 1.2; }
    .highlight {
      background: linear-gradient(120deg, color-mix(in oklab, var(--accent) 75%, transparent), transparent 60%);
      padding: .1rem .3rem; border-radius: .4rem;
    }
    .subtitle { color: var(--muted); margin-top: .25rem; }
    .actions { display: flex; gap: .6rem; flex-wrap: wrap; margin-top: .9rem; }
    .btn {
      display: inline-flex; align-items: center; gap: .5rem; border: 1px solid var(--border);
      background: var(--card); color: var(--text); padding: .55rem .8rem; border-radius: .6rem; font-weight: 600;
      transition: transform .2s ease, box-shadow .2s ease;
      box-shadow: var(--shadow);
    }
    .btn.primary { background: var(--accent); color: #fff; border-color: color-mix(in oklab, var(--accent) 60%, black); }
    .btn:hover { text-decoration: none; transform: translateY(-1px); }

    section { padding: 2rem 0; }
    section + section { border-top: 1px dashed var(--border); }
    .section-title { font-size: 1.4rem; margin: 0 0 1rem; }
    .muted { color: var(--muted); }

    .grid { display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .card {
      background: var(--card); border: 1px solid var(--border); border-radius: 1rem; padding: 1rem;
      transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
      box-shadow: var(--shadow);
    }
    .card:hover { transform: translateY(-3px); border-color: color-mix(in oklab, var(--accent) 45%, var(--border)); }
    .card h3 { margin: 0 0 .5rem; font-size: 1.05rem; }
    .meta { font-size: .9rem; color: var(--muted); }

    .pub-toolbar { display: flex; gap: .75rem; align-items: center; flex-wrap: wrap; margin-bottom: .9rem; }
    .search { width: min(420px, 100%); border: 1px solid var(--border); background: var(--bg); color: var(--text); padding: .55rem .7rem; border-radius: .6rem; }
    .chips { display: flex; gap: .5rem; flex-wrap: wrap; align-items: center; }
    .chip {
      border: 1px solid var(--border); background: var(--card); color: var(--text);
      padding: .35rem .6rem; border-radius: 999px; font-size: .9rem; cursor: pointer; user-select: none;
    }
    .chip[aria-pressed="true"] { background: var(--accent); color: #fff; border-color: color-mix(in oklab, var(--accent) 60%, black); }
    .select { border: 1px solid var(--border); background: var(--bg); color: var(--text); padding: .45rem .6rem; border-radius: .6rem; }

    .pub-list { list-style: none; padding: 0; margin: 0; }
    .pub-item { padding: .8rem; border: 1px solid var(--border); border-radius: .8rem; margin-bottom: .6rem; background: var(--card); }
    .pub-item .title { font-weight: 650; }
    .pub-item .authors, .pub-item .venue { color: var(--muted); font-size: .95rem; }

    footer { padding: 2rem 0 3rem; border-top: 1px solid var(--border); margin-top: 2rem; }
    .socials { display: flex; gap: .8rem; flex-wrap: wrap; }
    .badge { border: 1px solid var(--border); background: var(--card); padding: .35rem .6rem; border-radius: 999px; font-size: .9rem; }

    /* Reveal on scroll */
    .reveal { opacity: 0; transform: translateY(8px); }
    .reveal.is-visible { opacity: 1; transform: none; transition: opacity .4s ease, transform .4s ease; }

    /* Back-to-top */
    .to-top {
      position: fixed; right: 1rem; bottom: 1rem; z-index: 60; opacity: 0; visibility: hidden;
      transition: opacity .2s ease, transform .2s ease, visibility .2s;
      transform: translateY(8px);
    }
    .to-top.show { opacity: 1; visibility: visible; transform: none; }

    /* Dialog */
    dialog { border: 1px solid var(--border); border-radius: .8rem; background: var(--card); color: var(--text); padding: 1rem 1.2rem; width: min(520px, 92%); }
    dialog::backdrop { background: rgba(0,0,0,.35); }

    @media (max-width: 700px) {
      .hero-inner { grid-template-columns: 1fr; text-align: center; }
      .actions { justify-content: center; }
      .brand span { display: none; }
    }

    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; }
      .btn:hover, .card:hover { transform: none; }
    }

    /* Print */
    @media print {
      header, .actions, .pub-toolbar, .to-top, .progress { display: none !important; }
      .card, .pub-item { box-shadow: none !important; background: #fff !important; }
      a[href^="http"]::after { content: " (" attr(href) ")"; font-weight: 400; }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  <div class="progress" id="progress" aria-hidden="true"></div>

  <header>
    <div class="container nav">
      <div class="brand">
        <!-- ‚úÖ Updated header avatar to your photo -->
        <img src="assets/profile.jpeg" alt="Profile" width="28" height="28" loading="lazy" decoding="async" />
        <span>Ravi Satyappa Dabbanavar</span>
      </div>
      <nav class="nav-links" aria-label="Primary">
        <a href="#about">About</a>
        <a href="#education">Education</a>
        <a href="#research">Research</a>
        <a href="#publications">Publications</a>
        <a href="#conferences">Conferences</a>
        <a href="#projects">Projects</a>
        <a href="#teaching">Teaching</a>
        <a href="#awards">Awards</a>
        <a href="#experience">Experience</a>
        <a href="#skills">Skills</a>
        <a href="#contact">Contact</a>
        <button class="theme-btn" id="themeToggle" aria-label="Toggle dark mode" aria-pressed="false" title="Toggle theme (t)">üåó</button>
        <button class="theme-btn" id="helpBtn" aria-label="Keyboard shortcuts" title="Keyboard shortcuts (?)">‚å®Ô∏è</button>
      </nav>
    </div>
  </header>

  <main id="main" class="container">
    <!-- Hero / Intro -->
    <section class="hero reveal" id="home">
      <div class="hero-inner">
        <!-- ‚úÖ Updated hero photo to your photo -->
        <img class="avatar"
             src="assets/profile.jpeg"
             alt="Portrait of Ravi Satyappa Dabbanavar"
             width="140" height="140"
             decoding="async" fetchpriority="high" />
        <div>
          <h1><span class="highlight">Ravi Satyappa Dabbanavar</span></h1>
          <div class="subtitle">Ph.D. Scholar (IV Year, II Semester) ¬∑ Department of Architecture & Planning ¬∑ IIT Roorkee</div>
          <div class="actions">
            <a class="btn primary" href="#publications">View Publications</a>
            <a class="btn" href="assets/Ravi_cv.docx" download>Download CV</a>
            <a class="btn" href="https://scholar.google.com/scholar?q=Ravi+Satyappa+Dabbanavar" target="_blank" rel="noopener noreferrer">Google Scholar</a>
          </div>
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="reveal">
      <h2 class="section-title">About</h2>
      <div class="stack">
        <p>
          I am a <strong>Ph.D. Scholar</strong> (Integrated PG + Ph.D.) at the <strong>Department of Architecture & Planning</strong>, <strong>Indian Institute of Technology Roorkee</strong>.
          My areas of interest include <em>Urban & Rural Planning</em>, <em>Land-Use Planning</em>, and <em>Transport Planning</em>.
        </p>
        <p class="muted">Email me for collaborations in urban analytics, remote sensing, and user-generated big-data for land-use studies.</p>
      </div>
    </section>

    <!-- Education -->
    <section id="education" class="reveal">
      <h2 class="section-title">Education</h2>
      <ul>
        <li><strong>Ph.D. Scholar (Integrated PG + Ph.D.)</strong>, IIT Roorkee ‚Äî <em>Pursuing</em> ¬∑ IV Year, II Semester</li>
        <li><strong>Postgraduate (PG)</strong>, IIT Roorkee ‚Äî CGPA: 8.700</li>
        <li><strong>Graduate (UG)</strong>, School of Planning and Architecture, Vijayawada (2020) ‚Äî CGPA: 7.140</li>
        <li><strong>Intermediate (Class XII)</strong>, Narayana PU College, Bengaluru (2015) ‚Äî 75.60%</li>
      </ul>
    </section>

    <!-- Research -->
    <section id="research" class="reveal">
      <h2 class="section-title">Research</h2>
      <div class="grid">
        <article class="card">
          <h3>Urban Land-Use Classification from Multisource Data</h3>
          <p class="meta">2023‚Äîpresent ¬∑ IIT Roorkee</p>
          <p>Integrating satellite imagery and user-generated POI data with topic modeling and deep learning to improve urban functional zone mapping.</p>
        </article>
        <article class="card">
          <h3>Housing Satisfaction & Disaster Resilience</h3>
          <p class="meta">2024 ¬∑ Uttarakhand</p>
          <p>Evaluating PMAY-Urban‚Äôs contribution to socio-economic outcomes and resilience metrics across Uttarakhand districts.</p>
        </article>
      </div>
    </section>

    <!-- Publications -->
    <section id="publications" aria-live="polite" class="reveal">
      <h2 class="section-title">Publications</h2>
      <div class="pub-toolbar">
        <label for="pubSearch" class="visually-hidden" style="position:absolute;left:-9999px;">Search publications</label>
        <input id="pubSearch" class="search" type="search" placeholder="Search publications (title, author, venue, year)‚Ä¶  (hit / to focus)" aria-label="Search publications" />
        <div class="chips" id="yearChips" role="group" aria-label="Filter by year"></div>
        <div class="chips" id="statusChips" role="group" aria-label="Filter by status"></div>
        <select id="sortSelect" class="select" aria-label="Sort publications">
          <option value="year-desc">Year ‚Üì</option>
          <option value="year-asc">Year ‚Üë</option>
          <option value="title-asc">Title A‚ÄìZ</option>
        </select>
        <button class="btn" id="clearFilters">Clear</button>
        <span id="pubCount" class="muted" aria-live="polite"></span>
      </div>
      <ol id="pubList" class="pub-list"></ol>
      <details class="muted" style="margin-top:.5rem"><summary>How to edit this list</summary>
        <p>Edit the <code>publications</code> array in the inline script below.</p>
      </details>
    </section>

    <!-- Conferences & Workshops -->
    <section id="conferences" class="reveal">
      <h2 class="section-title">Conferences & Workshops</h2>
      <ul>
        <li><strong>EGU General Assembly</strong>, Apr 27 ‚Äì May 2, 2025, Vienna ‚Äî ‚ÄúIntegrating User-Generated POI Data and Satellite Imagery for Enhanced Urban Land Use Classification: A Topic Modeling Approach‚Äù ‚Äî <a href="https://doi.org/10.5194/egusphere-egu25-8380" target="_blank" rel="noopener noreferrer">DOI</a></li>
        <li><strong>AI and the City</strong>, Jan 4‚Äì5, 2025, Bengaluru ‚Äî ‚ÄúA Unified Data Integration Approach for Improved Urban Land Use Classification‚Äù</li>
        <li><strong>National Workshop (ICSSR-supported)</strong>, Feb 2024, IIT Roorkee ‚Äî ‚ÄúEvaluating PMAY-Urban‚Äôs contribution in Uplifting Housing Satisfaction, Socio-economic Conditions and Improving Disaster Resilience in Uttarakhand‚Äù</li>
        <li><strong>ILUS ‚Äî International Land Use Symposium</strong>, Oct 2023, CEPT University, Ahmedabad ‚Äî ‚ÄúA Review of Essential Urban Land Use Techniques: The Role of Remote Sensing and User Generated Big Data‚Äù</li>
        <li><strong>Workshop (British Council funded)</strong>, May 2022, IIT Roorkee ‚Äî ‚ÄúRethinking urban planning pedagogy to address future challenges of Urbanization‚Äù</li>
      </ul>
    </section>

    <!-- Projects -->
    <section id="projects" class="reveal">
      <h2 class="section-title">Selected Projects</h2>
      <div class="grid">
        <article class="card">
          <h3>Urban Land-Use Mapping Toolkit</h3>
          <p class="meta">2025 ¬∑ Python, GIS</p>
          <p>Prototype toolkit for integrating POI data and satellite imagery for functional zone mapping and evaluation.</p>
        </article>
        <article class="card">
          <h3>Transport Accessibility Dashboard</h3>
          <p class="meta">2024 ¬∑ Power BI, QGIS</p>
          <p>Interactive dashboard for multi-modal accessibility analysis in urban neighborhoods.</p>
        </article>
        <article class="card">
          <h3>PMAY-U Impact Study</h3>
          <p class="meta">2024 ¬∑ Field + Analytics</p>
          <p>Data collection and analysis to measure housing satisfaction and resilience improvements.</p>
        </article>
      </div>
    </section>

    <!-- Awards -->
    <section id="awards" class="reveal">
      <h2 class="section-title">Awards & Achievements</h2>
      <ul>
        <li>Best 25 Poster submissions ‚Äî Mission Amrit Sarovar, Jal Dharohar Sanrakshan Internship (2022)</li>
        <li>Best 25 Photography submissions ‚Äî Mission Amrit Sarovar, Jal Dharohar Sanrakshan Internship (2022)</li>
        <li>Recipient ‚Äî Going Online as Leaders (GOAL) Program (2020)</li>
        <li>AR GATE 2020</li>
      </ul>
    </section>

    <!-- Experience -->
    <section id="experience" class="reveal">
      <h2 class="section-title">Experience (Internships)</h2>
      <ul>
        <li><strong>Tamil Nadu Institute of Urban Studies, Coimbatore</strong> ‚Äî Summer Internship (Jun‚ÄìJul 2018) ¬∑ GIS handbook for town-planning officials (TN)</li>
        <li><strong>Urban Box Consultancy, Gorakhpur</strong> ‚Äî Summer Internship (Jun‚ÄìJul 2019) ¬∑ Drainage & sanitation plan for Gorakhpur (UP)</li>
        <li><strong>Mission Amrit Sarovar ‚Äî Jal Dharohar Sanrakshan Internship (AICTE)</strong> (Jul‚ÄìAug 2022) ¬∑ Rejuvenation & re-imagination strategy for Lake Mist, Mussoorie, Uttarakhand</li>
      </ul>
    </section>

    <!-- Teaching -->
    <section id=Teaching Assistance (TA) and Research Assistance (RA)" class="reveal">
      <h2 class="section-title">Teaching</h2>
      <ul>
        <li><strong>TA ‚Äî ARN-651, Planning Studio (MURP)</strong>, Dept. of Architecture & Planning, IIT Roorkee ‚Äî Spring 2022</li>
        <li><strong>TA ‚Äî ARN-659, Housing (MURP)</strong>, Dept. of Architecture & Planning, IIT Roorkee ‚Äî Autumn 2023</li>
        <li><strong>TA ‚Äî ARN-656, Rural Planning & Development (MURP)</strong>, Dept. of Architecture & Planning, IIT Roorkee ‚Äî Spring 2024</li>
        <li><strong>TA ‚Äî ARC-627, GIS & Remote Sensing Techniques (MURP)</strong>, Dept. of Architecture & Planning, IIT Roorkee ‚Äî Autumn 2024</li>
        <li><strong>RA ‚Äî Teaching plan and ITPI matters</strong>, Dept. of Architecture & Planning, IIT Roorkee ‚Äî Autumn 2023‚ÄìPresent</li>
      </ul>
    </section>

    <!-- Skills -->
    <section id="skills" class="reveal">
      <h2 class="section-title">Skills</h2>
      <div class="grid">
        <div class="card">
          <h3>Programming</h3>
          <p>Python; C++ (Basic); Java (Basic)</p>
        </div>
        <div class="card">
          <h3>GIS & Tools</h3>
          <p>ArcGIS, QGIS, ERDAS</p>
        </div>
        <div class="card">
          <h3>Data & Productivity</h3>
          <p>MS Office, Power BI</p>
        </div>
        <div class="card">
          <h3>Languages</h3>
          <p>English, Kannada, Hindi, Telugu</p>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="reveal">
      <h2 class="section-title">Contact</h2>
      <div class="grid">
        <div class="card">
          <h3>Email</h3>
          <p>
            <a id="emailLink" href="mailto:rs_dabbanavar@ar.iitr.ac.in">rs_dabbanavar@ar.iitr.ac.in</a>
            <button class="btn" id="copyEmail" aria-label="Copy email">Copy</button>
          </p>
        </div>
        <div class="card">
          <h3>Phone</h3>
          <p><a href="tel:+919108090740">+91 91080 90740</a></p>
        </div>
        <div class="card">
          <h3>Office</h3>
          <p>Dept. of Architecture & Planning, IIT Roorkee, Roorkee, Uttarakhand, India</p>
        </div>
        <div class="card">
          <h3>Social</h3>
          <p class="socials">
            <a class="badge" href="https://scholar.google.com/scholar?q=Ravi+Satyappa+Dabbanavar" target="_blank" rel="noopener noreferrer">Google Scholar</a>
            <a class="badge" href="https://orcid.org/0000-0002-0118-592X" target="_blank" rel="noopener noreferrer">ORCID</a>
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <button class="btn to-top" id="toTop" aria-label="Back to top">‚Üë Top</button>
    <div class="container stack">
      <div class="muted">¬© <span id="year"></span> Ravi Satyappa Dabbanavar ¬∑ Last updated <time id="lastUpdated"></time></div>
      <div class="muted">This site is a single HTML file. Host it on GitHub Pages by pushing to a repo and enabling Pages in <em>Settings ‚Üí Pages</em>.</div>
    </div>
  </footer>

  <!-- Keyboard Shortcuts Help -->
  <dialog id="kbdDialog" aria-labelledby="kbdTitle">
    <h3 id="kbdTitle" style="margin-top:0">Keyboard Shortcuts</h3>
    <ul>
      <li><kbd>t</kbd> ‚Äî Toggle theme</li>
      <li><kbd>/</kbd> ‚Äî Focus publications search</li>
      <li><kbd>?</kbd> ‚Äî Open this help</li>
      <li><kbd>Home</kbd>/<kbd>End</kbd> ‚Äî Top/Bottom of page</li>
    </ul>
    <div style="display:flex;gap:.5rem;justify-content:flex-end">
      <button class="btn" id="kbdClose">Close</button>
    </div>
  </dialog>

  <!-- JSON-LD Person Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Ravi Satyappa Dabbanavar",
    "jobTitle": "Ph.D. Scholar",
    "affiliation": { "@type": "CollegeOrUniversity", "name": "Indian Institute of Technology Roorkee" },
    "email": "mailto:rs_dabbanavar@ar.iitr.ac.in",
    "url": "https://<your-username>.github.io/",
    "sameAs": ["https://orcid.org/0000-0002-0118-592X"],
    "image": "https://<your-username>.github.io/assets/profile.jpg"
  }
  </script>

  <script>
    // Theme: init + persist + meta theme-color sync + aria-pressed
    (function initTheme() {
      const metaLight = document.querySelector('meta[name="theme-color"][media*="light"]');
      const metaDark  = document.querySelector('meta[name="theme-color"][media*="dark"]');
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const initial = saved || (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', initial);
      const btn = document.getElementById('themeToggle');
      if (btn) btn.setAttribute('aria-pressed', initial === 'dark' ? 'true' : 'false');

      function updateMeta(which) {
        if (!metaLight || !metaDark) return;
        metaLight.setAttribute('content', '#ffffff'); // why: keeps address bar readable in light
        metaDark.setAttribute('content', '#0b0c0f'); // why: keeps address bar readable in dark
      }
      updateMeta(initial);

      document.getElementById('themeToggle').addEventListener('click', () => {
        const html = document.documentElement;
        const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        document.getElementById('themeToggle').setAttribute('aria-pressed', next === 'dark' ? 'true' : 'false');
        updateMeta(next);
      });
    })();

    // Footer dates
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('lastUpdated').textContent =
      new Date(document.lastModified).toLocaleDateString(undefined, { year: 'numeric', month: 'short' });

    // Publications data (EDIT ME)
    const publications = [
      
      {
        year: 2024,
        title: "A Comparative Study of Topic Modelling Approaches for User-Generated Point of Interest Data",
        authors: ["R. S. Dabbanavar", "A. Biswas"],
        venue: "ICCAUA 2024 ‚Äî 7th International Conference of Contemporary Affairs in Architecture and Urbanism, Istanbul, Turkey",
        links: { doi: "10.38027/ICCAUA2024IN0334" }
      },
      {
        year: 2024,
        title: "Impact Assessment Study of Area Based Development Components in Indian Smart Cities",
        authors: ["A. Biswas et al."],
        venue: "Smart Cities Mission Management Unit (SCMMU), 2024",
        links: { }
      }
      
    ];

    // --- Publications: filter + sort + search
    const listEl = document.getElementById('pubList');
    const countEl = document.getElementById('pubCount');
    const totalCount = publications.length;
    const yearsSet = Array.from(new Set(publications.map(p => p.year))).sort((a,b)=>b-a);
    const yearChipsEl = document.getElementById('yearChips');
    const statusChipsEl = document.getElementById('statusChips');
    const sortEl = document.getElementById('sortSelect');
    const searchEl = document.getElementById('pubSearch');
    const clearBtn = document.getElementById('clearFilters');

    let state = { year: 'All', status: 'All', sort: 'year-desc', q: '' };

    function statusOf(p) {
      const underReview = /under review/i.test(p.venue);
      const hasDOI = p.links && p.links.doi;
      if (hasDOI) return 'Published';
      return underReview ? 'Under review' : 'Published';
    }

    function makeChip(label, groupEl, current) {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'chip';
      btn.textContent = label;
      btn.setAttribute('aria-pressed', String(current === label));
      btn.addEventListener('click', () => {
        const isYear = groupEl === yearChipsEl;
        if (isYear) state.year = label;
        else state.status = label;
        [...groupEl.children].forEach(c => c.setAttribute('aria-pressed', 'false'));
        btn.setAttribute('aria-pressed', 'true');
        render();
      });
      groupEl.appendChild(btn);
    }

    function buildChips() {
      yearChipsEl.innerHTML = '';
      statusChipsEl.innerHTML = '';
      makeChip('All', yearChipsEl, state.year);
      yearsSet.forEach(y => makeChip(String(y), yearChipsEl, state.year));
      ['All','Published','Under review'].forEach(s => makeChip(s, statusChipsEl, state.status));
    }
    buildChips();

    function applyFilters(items) {
      return items.filter(p => {
        const okYear = state.year === 'All' || String(p.year) === state.year;
        const okStatus = state.status === 'All' || statusOf(p) === state.status;
        const hay = (p.title + ' ' + p.venue + ' ' + String(p.year) + ' ' + p.authors.join(' ')).toLowerCase();
        const okQ = !state.q || hay.includes(state.q);
        return okYear && okStatus && okQ;
      });
    }

    function applySort(items) {
      const arr = items.slice();
      if (state.sort === 'year-desc') arr.sort((a,b)=> b.year - a.year || a.title.localeCompare(b.title));
      if (state.sort === 'year-asc')  arr.sort((a,b)=> a.year - b.year || a.title.localeCompare(b.title));
      if (state.sort === 'title-asc') arr.sort((a,b)=> a.title.localeCompare(b.title));
      return arr;
    }

    function renderPublications(items) {
      listEl.innerHTML = '';
      if (!items.length) {
        const li = document.createElement('li');
        li.className = 'pub-item';
        li.textContent = 'No publications match your filters.';
        listEl.appendChild(li);
        return;
      }
      const byYear = items.reduce((acc, p) => ((acc[p.year] ||= []).push(p), acc), {});
      const years = Object.keys(byYear).map(Number).sort((a, b) => state.sort === 'year-asc' ? a - b : b - a);

      let rendered = 0;
      for (const y of years) {
        const yearGroup = document.createElement('li');
        yearGroup.className = 'pub-item';
        const header = document.createElement('div');
        header.className = 'meta';
        header.textContent = y;
        yearGroup.appendChild(header);

        const groupList = document.createElement('ol');
        groupList.style.marginTop = '.5rem';
        groupList.style.paddingLeft = '1rem';

        byYear[y].forEach(p => {
          rendered++;
          const li = document.createElement('li');
          li.style.marginBottom = '.5rem';

          const title = document.createElement('div');
          title.className = 'title';
          title.textContent = p.title;

          const authors = document.createElement('div');
          authors.className = 'authors';
          authors.textContent = p.authors.join(', ');

          const venue = document.createElement('div');
          venue.className = 'venue';
          venue.textContent = p.venue + ' ‚Äî ' + statusOf(p);

          const links = document.createElement('div');
          links.className = 'meta';
          if (p.links) {
            const entries = Object.entries(p.links).filter(([,v]) => !!v);
            for (const [k, v] of entries) {
              const a = document.createElement('a');
              a.href = v.startsWith('http') || v.startsWith('#') ? v : `https://doi.org/${v}`;
              a.target = v.startsWith('#') ? '' : '_blank';
              a.rel = v.startsWith('#') ? '' : 'noopener noreferrer';
              a.textContent = k.toUpperCase();
              a.style.marginRight = '.6rem';
              links.appendChild(a);
            }
          }

          li.appendChild(title);
          li.appendChild(authors);
          li.appendChild(venue);
          if (links.childNodes.length) li.appendChild(links);
          groupList.appendChild(li);
        });

        yearGroup.appendChild(groupList);
        listEl.appendChild(yearGroup);
      }

      const plural = totalCount === 1 ? 'item' : 'items';
      const suffix = items.length === totalCount ? '' : ` ¬∑ showing ${items.length} of ${totalCount}`;
      countEl.textContent = `${totalCount} ${plural}${suffix}`;
    }

    function render() {
      const filtered = applyFilters(publications);
      const sorted = applySort(filtered);
      renderPublications(sorted);
    }
    render();

    searchEl.addEventListener('input', (e) => { state.q = e.target.value.trim().toLowerCase(); render(); });
    sortEl.addEventListener('change', (e) => { state.sort = e.target.value; render(); });
    clearBtn.addEventListener('click', () => {
      state = { year: 'All', status: 'All', sort: 'year-desc', q: '' };
      searchEl.value = '';
      buildChips();
      sortEl.value = state.sort;
      render();
      searchEl.focus();
    });

    // Active section link highlight via IntersectionObserver
    (function navActive() {
      const links = [...document.querySelectorAll('.nav-links a[href^="#"]')];
      const map = new Map(links.map(a => [a.getAttribute('href').slice(1), a]));
      const obs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const id = entry.target.id;
          const link = map.get(id);
          if (!link) return;
          if (entry.isIntersecting) {
            links.forEach(l => l.setAttribute('aria-current', 'false'));
            link.setAttribute('aria-current', 'true');
          }
        });
      }, { threshold: 0.5 });
      document.querySelectorAll('main section[id]').forEach(sec => obs.observe(sec));
    })();

    // Reveal on scroll
    (function revealSections() {
      const prefersReduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduce) { document.querySelectorAll('.reveal').forEach(el => el.classList.add('is-visible')); return; }
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(e => {
          if (e.isIntersecting) { e.target.classList.add('is-visible'); obs.unobserve(e.target); }
        });
      }, { threshold: 0.15 });
      document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    })();

    // Scroll progress + back-to-top
    (function scrollHelpers() {
      const bar = document.getElementById('progress');
      const toTop = document.getElementById('toTop');
      const onScroll = () => {
        const h = document.documentElement;
        const scrolled = (h.scrollTop) / ((h.scrollHeight - h.clientHeight) || 1);
        bar.style.width = (scrolled * 100).toFixed(2) + '%';
        if (h.scrollTop > 500) toTop.classList.add('show'); else toTop.classList.remove('show');
      };
      document.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
      toTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();

    // Copy email
    (function copyEmail() {
      const btn = document.getElementById('copyEmail');
      const link = document.getElementById('emailLink');
      btn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(link.textContent.trim());
          btn.textContent = 'Copied!';
          setTimeout(() => (btn.textContent = 'Copy'), 1400);
        } catch {
          btn.textContent = 'Press Ctrl+C';
        }
      });
    })();

    // Keyboard shortcuts dialog
    (function keyboard() {
      const dialog = document.getElementById('kbdDialog');
      const openBtn = document.getElementById('helpBtn');
      const closeBtn = document.getElementById('kbdClose');
      function open() { dialog.showModal(); }
      function close() { dialog.close(); }
      openBtn.addEventListener('click', open);
      closeBtn.addEventListener('click', close);
      dialog.addEventListener('click', (e) => { if (e.target === dialog) close(); });

      document.addEventListener('keydown', (e) => {
        const tag = e.target.tagName;
        if (e.key === 't' && !e.metaKey && !e.ctrlKey && !e.altKey) {
          e.preventDefault();
          document.getElementById('themeToggle').click();
        } else if (e.key === '/' && tag !== 'INPUT' && tag !== 'TEXTAREA') {
          e.preventDefault();
          document.getElementById('pubSearch').focus();
        } else if (e.key === '?' && !e.metaKey && !e.ctrlKey && !e.altKey) {
          e.preventDefault();
          open();
        }
      });
    })();
  </script>
</body>
</html>
